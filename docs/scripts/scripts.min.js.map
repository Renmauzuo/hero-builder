{"version":3,"file":"scripts.min.js","sources":["src/scripts/scripts.js"],"sourcesContent":["var exporter, scene, link;\r\n\r\n$(function () {\r\n    link = document.createElement( 'a' );\r\n    link.style.display = 'none';\r\n    document.body.appendChild( link );\r\n    link.download = 'scene.stl';\r\n\r\n    const loader = new THREE.GLTFLoader();\r\n    exporter = new THREE.STLExporter();\r\n\r\n    let animationWidth = $('#viewport').width();\r\n    let animationHeight = $('#viewport').height();\r\n    scene = new THREE.Scene();\r\n    scene.background = new THREE.Color( 0x808080 );\r\n    const camera = new THREE.PerspectiveCamera( 75, animationWidth / animationHeight, 0.1, 1000 );\r\n    \r\n    const renderer = new THREE.WebGLRenderer();\r\n    renderer.setSize( animationWidth, animationHeight );\r\n    $('#viewport').append(renderer.domElement);\r\n    const geometry = new THREE.BoxGeometry();\r\n    const material = new THREE.MeshBasicMaterial( { color: 0x00ff00 } );\r\n    //const cube = new THREE.Mesh( geometry, material );\r\n    //scene.add( cube );\r\n\r\n\r\n    var light = new THREE.AmbientLight( 0x404040 );\r\n    scene.add(light);\r\n\r\n    const controls = new THREE.OrbitControls( camera, renderer.domElement );\r\n\r\n    //controls.update() must be called after any manual changes to the camera's transform\r\n    camera.position.set( 0, 30, 100 );\r\n    controls.update();\r\n    \r\n    //camera.position.y = 2;\r\n    //camera.position.z = 5;\r\n\r\n    function animate() {\r\n        requestAnimationFrame( animate );\r\n        renderer.render( scene, camera );\r\n    }\r\n    animate();\r\n\r\n    let model = 'Female-Body-Rigged-NEW';\r\n    //let model = 'Dwarf-Female-Druid-2';\r\n    loader.load( 'models/characters/'+model+'.glb', function ( gltf ) {\r\n        gltf.scene.traverse( child => {\r\n\r\n            if ( child.material ) child.material.metalness = 0;\r\n        \r\n        } );\r\n        scene.add( gltf.scene );\r\n\r\n    \r\n    }, undefined, function ( error ) {\r\n    \r\n        console.error( error );\r\n    \r\n    } );\r\n});\r\n\r\nfunction downloadSTL() {\r\n    console.log('download');\r\n    let result = exporter.parse( scene, { binary: true } );\r\n    let blob = new Blob( [ result ], { type: 'application/octet-stream' } );\r\n    link.href = URL.createObjectURL( blob );\r\n    link.click();\r\n}"],"names":["exporter","scene","link","$","document","createElement","style","display","body","appendChild","download","loader","THREE","GLTFLoader","STLExporter","animationWidth","width","animationHeight","height","Scene","background","Color","camera","PerspectiveCamera","renderer","WebGLRenderer","setSize","append","domElement","geometry","BoxGeometry","material","MeshBasicMaterial","color","light","AmbientLight","add","controls","OrbitControls","position","set","update","animate","requestAnimationFrame","render","model","load","gltf","traverse","child","metalness","undefined","error","console","downloadSTL","log","result","parse","binary","blob","Blob","type","href","URL","createObjectURL","click"],"mappings":"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"}